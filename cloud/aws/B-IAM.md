### IAM Basics
---
##### Identity and Access Management (IAM)
```
IAM is a web service that deals with secure access to AWS resources. It is used to centrally manage who is authenticated 
and authorized to use certain resources. Note that IAM resources are globally scoped in an AWS account.
```

##### IAM Properties & APIs
```
All IAM properties are listed here:
  * https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_IAM.html
All IAM APIs are listed here: 
  * https://docs.aws.amazon.com/IAM/latest/APIReference/welcome.html
```

### IAM Users and Groups
---
##### IAM Users
```
IAM users have defined permission policies that determine what the identity can and cannot do in AWS. This identity is 
uniquely associated with one person, and can access resources via access keys (i.e. long term credentials). 
```

##### IAM Group
```
a) When the number of IAM users increases, it becomes difficult to maintain permissions for each IAM user. To streamline 
   the process, users can be grouped into IAM groups so that permissions can be collectively granted. 
b) Groups can only consist of users. Users do not need to belong to a group, but can belong to multiple groups. When a
   user belongs to multiple groups, all policies from that group will be inherited to the user.
```

##### IAM Policy Types
```
a) Managed Policy: Standalone policy that is defined and maintained by AWS. These policies are predefined for 
   convenience reasons.
b) Customer Managed Policy: Customers can define their own standalone policy and attach the newly defined policy to 
   users, groups, and roles.
c) Inline Policy: Policy that is directly embedded into a single IAM identity. The policy maintains a strict one-to-one 
   relationship between a policy and an identity.   
```

### IAM Roles
---
##### IAM Role
```
IAM role is an identity that is usually assumed by a service. These roles rely on temporary security credentials 
generated through STS to perform actions in AWS. Like IAM users, roles can be attached with IAM policies that define the 
scope of permissions.
```

##### Service Linked Role
```
A service role is an IAM role that a service assumes to perform actions on one's behalf. A service linked role is a 
service role that is predefined by an AWS service and includes all the permissions that the service requires to call 
other AWS services. Service linked roles can typically be assumed only by the linked AWS service.
```

##### Security Token Service (STS)
```
Entities with IAM roles attached will make an API request to the AWS STS endpoint for temporary security credentials, 
which are dynamically generated by STS when the request is made. Various STS API operations exist (e.g. AssumeRole,
AssumeRoleWithWebIdentity) that can be found: https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html#stsapi_comparison
```

##### Trust Policy
```
JSON documentation that defines which principals (e.g. entity that will perform actions) will assume the IAM role and 
under what conditions.
```

##### Federation
```
Federation
  * Creation of a trust relationship between an external identity provider and AWS. 
  * Trust relationships can be established via OIDC or SAML, which can be used to assign IAM roles to federated users.

Federated Users
   * Existing user identities outside AWS (e.g. IdPs) who can be granted temporary access to AWS resources.
```

### Cognito
---
##### Cognito Basics
```
Amazon Cognito gives users outside AWS an identity to interact with web and mobile applications. User pools provide sign
in functionality and can be integrated with API Gateway or ALBs. Identity pools provide temporary AWS credentials to 
```

##### User Pools
```
a) User pools provide sign-in functionality with username and password authentication, MFA, or through federated identity 
   providers (e.g. Google, Facebook, SAML).
b) After authenticating, users retrieve tokens from user pools that are then passed on to an API Gateway or ALB to 
   authorize API calls. The API Gateway and ALB will evaluate the token with Cognito to authorize the request.
```

##### Identity Pools
```
a) Identity pools (federated identities) allow clients to obtain temporary AWS credentials. Clients authenticate and
   retrieve tokens through Cognito user pools or through third party logins (e.g. Google, Facebook, SAML, OIDC). The 
   token is then exchanged for temporary AWS credentials with Cognito identity pools. After Cognitio validates the token 
   with third party providers, it will return credentials to the client.
b) IAM policies applied to the temporary credentials are defined in Cognito.
```